/* Auto-translated placeholder from TypeScript. */
let originalTs = "/**\n * CSS Build Script\n *\n * Modern CSS processing with LightningCSS via Deno.\n * Replaces PostCSS/Autoprefixer with faster native tooling.\n *\n * @module\n */\n\nimport { ensureDir } from '@std/fs';\nimport { join, basename } from '@std/path';\n// @ts-ignore: lightningcss types\nimport { transform, browserslistToTargets } from 'lightningcss';\n\nconst SRC_DIR = './src/css';\nconst DIST_DIR = './dist/css';\nconst LEGACY_CSS_DIR = './css';\n\n/**\n * CSS build configuration\n */\ninterface CSSConfig {\n  readonly minify: boolean;\n  readonly sourceMaps: boolean;\n  readonly targets: ReturnType<typeof browserslistToTargets>;\n}\n\nconst config: CSSConfig = {\n  minify: Deno.env.get('NODE_ENV') === 'production',\n  sourceMaps: Deno.env.get('NODE_ENV') !== 'production',\n  targets: browserslistToTargets([\n    '>= 0.5%',\n    'last 2 versions',\n    'Firefox ESR',\n    'not dead',\n  ]),\n};\n\n/**\n * Process a single CSS file with LightningCSS\n */\nasync function processCSS(inputPath: string, outputPath: string): Promise<void> {\n  const filename = basename(inputPath);\n  console.log(`  Processing: ${filename}`);\n\n  const code = await Deno.readFile(inputPath);\n\n  const result = transform({\n    filename: inputPath,\n    code,\n    minify: config.minify,\n    sourceMap: config.sourceMaps,\n    targets: config.targets,\n    drafts: {\n      customMedia: true,\n    },\n    nonStandard: {\n      deepSelectorCombinator: true,\n    },\n    errorRecovery: true,\n  });\n\n  await Deno.writeFile(outputPath, result.code);\n\n  if (result.map && config.sourceMaps) {\n    await Deno.writeFile(\n      `${outputPath}.map`,\n      new TextEncoder().encode(JSON.stringify(result.map))\n    );\n  }\n\n  const inputSize = code.length;\n  const outputSize = result.code.length;\n  const reduction = ((1 - outputSize / inputSize) * 100).toFixed(1);\n\n  console.log(`    ${inputSize} â†’ ${outputSize} bytes (${reduction}% reduction)`);\n}\n\n/**\n * Find all CSS files in a directory\n */\nasync function findCSSFiles(dir: string): Promise<string[]> {\n  const files: string[] = [];\n\n  try {\n    for await (const entry of Deno.readDir(dir)) {\n      if (entry.isFile && entry.name.endsWith('.css') && !entry.name.endsWith('.min.css')) {\n        files.push(join(dir, entry.name));\n      }\n    }\n  } catch {\n    // Directory may not exist yet\n  }\n\n  return files;\n}\n\n/**\n * Main CSS build function\n */\nasync function main(): Promise<void> {\n  console.log('ðŸŽ¨ Building CSS assets...\\n');\n\n  await ensureDir(DIST_DIR);\n\n  // Process modern CSS from src/css\n  const srcFiles = await findCSSFiles(SRC_DIR);\n  if (srcFiles.length > 0) {\n    console.log(`Found ${srcFiles.length} files in ${SRC_DIR}:`);\n    for (const file of srcFiles) {\n      const outputFile = join(DIST_DIR, basename(file).replace('.css', '.min.css'));\n      await processCSS(file, outputFile);\n    }\n  }\n\n  // Also process legacy CSS files (minify existing)\n  const legacyFiles = await findCSSFiles(LEGACY_CSS_DIR);\n  if (legacyFiles.length > 0) {\n    console.log(`\\nFound ${legacyFiles.length} legacy files in ${LEGACY_CSS_DIR}:`);\n    for (const file of legacyFiles) {\n      const filename = basename(file);\n      // Skip already minified files\n      if (filename.includes('.min.')) continue;\n\n      const outputFile = join(DIST_DIR, filename.replace('.css', '.min.css'));\n      await processCSS(file, outputFile);\n    }\n  }\n\n  console.log('\\nâœ“ CSS build complete');\n}\n\n// Run if executed directly\nif (import.meta.main) {\n  main();\n}\n\nexport { main, processCSS, findCSSFiles };\n"
/* TODO: Port to ReScript. */
